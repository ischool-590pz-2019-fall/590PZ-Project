<!DOCTYPE html>
<html lang="en">
<head>
    <title>MAZE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
    <h2>Maze</h2>
    <div class="button-container">
        <h6 style="display: inline-block">New Game:</h6>
        <a class="waves-effect waves-light btn z-depth-0 btn-small" href="/easy">Easy</a>
        <a class="waves-effect waves-light btn z-depth-0 btn-small" href="/median">Median</a>
        <a class="waves-effect waves-light btn z-depth-0 btn-small" href="/hard">Hard</a>
    </div>
    {% if maze %}
        <div class="maze-board" style="{{ 'grid-template-columns: repeat(' + columns + ', 1fr);' }}">
        {% for row in maze.board %}
            {% for cell in row %}
                {% if cell == marks['aisle'] %}
                    <div class="maze-cell aisle"></div>
                {% elif cell == marks['solution'] %}
                    <div class="maze-cell solution"></div>
                {% elif cell == marks['wall'] %}
                    <div class="maze-cell wall"></div>
                {% elif cell == marks['start'] %}
                    <div class="maze-cell start"></div>
                {% elif cell == marks['end'] %}
                    <div class="maze-cell end"></div>
                {% elif cell == marks['portal'] %}
                    <div class="maze-cell portal"></div>
                {% elif cell == marks['portal_solution'] %}
                    <div class="maze-cell portal-solution"></div>
                {% endif %}
            {% endfor %}
        {% endfor %}
        </div>
    {% endif %}
    <div class="legend-container">
        <div class="legend-item">
            <div class="maze-cell start legend-icon"></div>
             Starting
        </div>
        <div class="legend-item">
            <div class="maze-cell end legend-icon"></div>
             Destination
        </div>
        <div class="legend-item">
            <div class="maze-cell portal legend-icon"></div>
             Portal
        </div>
    </div>
    <div class="button-container">
        <a class="waves-effect waves-light btn z-depth-0">Restart</a>
        <a class="waves-effect waves-light btn z-depth-0" id="solution-btn">Show Solution</a>
    </div>
</div>
</body>

<script>
    const solutionBtn = document.getElementById('solution-btn');
    const switchSolution = function(e) {
        const solutionAisles = document.querySelectorAll('.solution');
        const solutionPortals = document.querySelectorAll('.portal-solution');
        if (e.target.innerText === 'Show Solution'.toUpperCase()) {
            e.target.innerText = 'Hide Solution';
            solutionAisles.forEach(aisle => {
               aisle.style.background = 'lightgreen';
            });
            solutionPortals.forEach(portal => {
                portal.style.background = 'blueviolet';
            })
        } else {
            e.target.innerText = 'Show Solution';
            const aisleColor = document.getElementsByClassName('aisle')[0].style.background;
            const portalColor = document.getElementsByClassName('portal')[0].style.background;
            solutionAisles.forEach(aisle => {
               aisle.style.background = aisleColor;
            });
            solutionPortals.forEach(portal => {
                portal.style.background = portalColor;
            })
        }
    };

    solutionBtn.addEventListener('click', switchSolution);
</script>

</html>
